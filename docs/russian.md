# Документация SimpleMenu
Содержимое этой страницы является документацией к библиотеке.
Здесь Вы найдёте список доступных методов, чтобы увидеть ознакомительную информацию о библиотеке нажмите <a href="https://github.com/ArduinoLibs/SimpleMenu/blob/master/README.md" style="font-size: 12px;line-height: 12px;">здесь</a>

Навигация:
1. [Сторонние библиотеки](#сторонние-библиотеки)
1. [Константы](#константы)
1. [Типы данных](#типы-данных)
1. [Список базовых методов](#список-базовых-методов)


# Сторонние библиотеки
Как мы уже говорили ранее, эта библиотека создана чтобы взять на себя функциональность создания меню.
Чтобы это сделать мы используем сторонние библиотеки (которые не включены в саму библиотеку и не являются обязательными, но мы рекомендуем установить и использовать их в Вашем проекте).
Вот полный список библиотек которые мы поддерживаем и используем для управление меню чтобы не мучать Вас разработкой функциональности управления.

| Библиотека                                                        | Рекомендуемая версия  | Автор     | Для чего                                                                                      | Заметки                                                                                                   |
| ----------------------------------------------------------------- | --------------------- | --------- | --------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------- |
| [GyverButton](/AlexGyver/GyverLibs/releases/tag/GyverButton)      | 3.5                   | AlexGyver | Позволяет Вам сделать управление меню при помощи кнопок                                       |                                                                                                           |
| [GyverEncoder](/AlexGyver/GyverLibs/releases/tag/GyverEncoder)    | 4.8                   | AlexGyver | Позволяет Вам сделать управление меню при помощи энкодера                                     |                                                                                                           |
| [GyverOLED](/AlexGyver/GyverLibs/releases/tag/GyverOLED)          | beta                  | AlexGyver | Позволяет выводить меню на совместимые OLED экраны (Экраны с разрешениеем 128x64 и 128x32)    | Хоть и библиотека на стадии бета-тестировании, она работает очень хорошо, и вы можете ее использовать.    |

*Вы можете попросить добавить совместимость для других библиотек создав новое issue или pull-request*

# Константы
| Категория                 | Описание                                                                          | Использование                                                     |
| ------------------------- | --------------------------------------------------------------------------------- | ----------------------------------------------------------------- |
| Устройства ввода          | Определяет, какое устройство следует использовать для ввода данных                | Укажите при создании новой переменной меню                        |
| Устройства вывода         | Определяет, какое устройство следует использовать для вывода на него меню         | Укажите при создании новой переменной меню                        |
| Прокрутка                 | Определяет, как элементы должны прокручиваться                                    | Укажите в соответствующей функции                                 |
| Размер буфера элементов   | Задает размер для хранения информации об элементах в памяти                       | Определить перед загрузкой библиотеки (общее для всех меню)       |
| Действия устройства ввода | Определяет действие, которое должно быть выполнено при активации устройства ввода | Укажите в соответствующем методе для выбранного устройства ввода  |

| Категория                     | Константа                 | Значение                  | Описание                                                                                                                                  |
| ----------------------------- | ------------------------- | ------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------- |
| **Устройства ввода**          | `SMENU_INPUT_MANUAL`      | 0                         | Вам надо будет использовать методы `clickDown`, `clickUp` и `clickSelect` чтобы управлять меню                                            |
| **Устройства ввода**          | `SMENU_INPUT_SUBMENU`     | `SMENU_INPUT_MANUAL` (0)  | Для под-меню библиотека будет вызывать методы `clickDown`, `clickUp` и `clickSelect`                                                      |
| **Устройства ввода**          | `SMENU_INPUT_BUTTON`      | 1                         | Кнопки используя библиотеку `GyverButton`                                                                                                 |
| **Устройства ввода**          | `SMENU_INPUT_ENCODER`     | 2                         | Энкодеры используя библиотеку `GyverEncoder`                                                                                              |
|                               |                           |                           |                                                                                                                                           |
| **Устройства вывода**         | `SMENU_OUTPUT_MANUAL`     | 0                         | Вам надо будет использовать метод `bindOutputFunction` чтобы ввывести меню                                                                |
| **Устройства вывода**         | `SMENU_OUTPUT_SUBMENU`    | `SMENU_OUTPUT_MANUAL` (0) | Для под-меню библиотека установит функцию вывода из основного меню                                                                        |
| **Устройства вывода**         | `SMENU_OUTPUT_OLED`       | 1                         | Совместимые с библиотекой `GyverOLED` OLED экраны (128x64 и 128x32 OLED экраны)                                                           |
|                               |                           |                           |                                                                                                                                           |
| **Прокрутка**                 | `SMENU_SCROLL_ITEM`       | 0                         | **По умолчанию**<br>Прокрутка будет производиться как на современных устройствах, построчно<br>![Пример](https://i.imgur.com/S6aQFkZ.png) |
| **Прокрутка**                 | `SMENU_SCROLL_PAGE`       | 1                         | Прокрутка будет осуществлена постранично<br>![Пример](https://i.imgur.com/UmiSP4p.png)                                                    |
|                               |                           |                           |                                                                                                                                           |
| **Размер буфера элементов**   | `SMENU_ITEMBUFSIZE_1`     | -                         | **По умолчанию**<br>Системные переменные для хранения таких вещей как выбранный в данный момент элемент, займут 1 байт памяти             |
| **Размер буфера элементов**   | `SMENU_ITEMBUFSIZE_2`     | -                         | Системные переменные для хранения таких вещей как выбранный в данный момент элемент, займут 2 байта памяти                                |
| **Размер буфера элементов**   | `SMENU_ITEMBUFSIZE_4`     | -                         | Системные переменные для хранения таких вещей как выбранный в данный момент элемент, займут 4 байта памяти                                |
|                               |                           |                           |                                                                                                                                           |
| **Действия устройства ввода** | `SMENU_BTN_DOWN`          | 0                         | Только если загружена библиотека `GyverButton`. Кнопка для перемещения на один элемент вниз                                               |
| **Действия устройства ввода** | `SMENU_BTN_UP`            | 1                         | Только если загружена библиотека `GyverButton`. Кнопка для перемещения на один элемент вверх                                              |
| **Действия устройства ввода** | `SMENU_BTN_SEL`           | 2                         | Только если загружена библиотека `GyverButton`. Кнопка для выбора текущего элемента меню                                                  |

# Типы данных
**`SimpleMenu`:**
> Объект меню.

**`SMenuItem`:**
> В зависимости от размера, который вы выбрали при определении `SMENU_ITEMBUFSIZE_1`, `SMENU_ITEMBUFSIZE_2` или `SMENU_ITEMBUFSIZE_4`, этот тип структуры будет псевдонимом для `unsigned char`, `unsigned short` и `unsigned long` соответственно.

**`MENUITEM_ONCLICK`:**
> Функция с сигнатурой `void functionName()` для обработки нажатий по элементам меню.

**`SMenuRenderItems`:**
> Список элементов на странице для вывода. Содержит всего 2 поля: \
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**count** - Количество элементов для рендеринга (обычно размер страницы до тех пор, пока страница не будет заполнена полностью, например, при прокрутке до последней страницы, и она содержит только несколько элементов на странице), вы должны использовать это при итерации по всем элементам меню \
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;**items** - Указатель на надпись первого элемента меню. Вы можете использовать это как массив, к примеру, `items[0]` вернёт отформатированную надпись для первого элемента меню, `items[1]` для второго элемента и т.д

# Список базовых методов
| Сигнатура метода                                                                  | Аргументы                                                                                                                                                                                                                             | Возвращаемое значение | Описание                                                                                                                                                                                  |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `SimpleMenu(byte inputDevice, byte outputDevice)`                                 | **inputDevice** - Тип устройства ввода (используйте константу со списка устройств ввода)<br>**outputDevice** - Тип устройства вывода (используйте константу со списока устройств вывода)                                              | *конструктор*         | Создаёт новое меню с указанными значениями                                                                                                                                                |
| `void addMenuItem(const char item[])`                                             | **item** - Текст нового элемента                                                                                                                                                                                                      | -                     | Добавляет в меню новый элемент без обработчика                                                                                                                                            |
| `void addMenuItem(const char item[], MENUITEM_ONCLICK onClick)`                   | **item** - Текст нового элемента<br>**onClick** - Метод который будет вызван при выборе элемента из меню                                                                                                                              | -                     | Добавляет в меню новый элемент с ручным обработчиком (метод будет вызван при выборе элемента из меню)                                                                                     |
| `void addMenuItem(const char item[], SimpleMenu* subMenu)`                        | **item** - Текст нового элемента<br>**subMenu** - Указатель на под-меню которое следует открыть при выборе элемента меню                                                                                                              | -                     | Добавляет в меню новый элемент который при его выборе откроет под-меню                                                                                                                    |
| `void addFlashMenuItem(const __FlashStringHelper* item)`                          | **item** - Текст нового элемента в виде Flash памяти (PROGMEM или F-макро)                                                                                                                                                            | -                     | Добавляет в меню новый элемент без обработчика                                                                                                                                            |
| `void addFlashMenuItem(const __FlashStringHelper* item, MENUITEM_ONCLICK onClick)`| **item** - Текст нового элемента в виде Flash памяти (PROGMEM или F-макро)<br>**onClick** - Метод который будет вызван при выборе элемента из меню                                                                                    | -                     | Добавляет в меню новый элемент с ручным обработчиком (метод будет вызван при выборе элемента из меню)                                                                                     |
| `void addFlashMenuItem(const __FlashStringHelper* item, SimpleMenu* subMenu)`     | **item** - Текст нового элемента в виде Flash памяти (PROGMEM или F-макро)<br>**subMenu** - Указатель на под-меню которое следует открыть при выборе элемента меню                                                                    | -                     | Добавляет в меню новый элемент который при его выборе откроет под-меню                                                                                                                    |
| `void addGoBackMenuItem(const char item[])`                                       | **item** - Текст нового элемента                                                                                                                                                                                                      | -                     | Добавляет системный-элемент в меню для возврата в родительское меню (кнопка вверх или назад в под-меню)                                                                                   |
| `void addFlashGoBackMenuItem(const __FlashStringHelper* item)`                    | **item** - Текст нового элемента в виде Flash памяти (PROGMEM или F-макро)                                                                                                                                                            | -                     | Добавляет системный-элемент в меню для возврата в родительское меню (кнопка вверх или назад в под-меню)                                                                                   |
| `void clickDown()`                                                                | -                                                                                                                                                                                                                                     | -                     | Метод для ручного управления меню, симулирует нажатие на кнопку "вниз"                                                                                                                    |
| `void clickUp()`                                                                  | -                                                                                                                                                                                                                                     | -                     | Метод для ручного управления меню, симулирует нажатие на кнопку "вверх"                                                                                                                   |
| `void clickSelect()`                                                              | -                                                                                                                                                                                                                                     | -                     | Метод для ручного управления меню, симулирует нажатие на кнопку "выбор"                                                                                                                   |
| `void init(SMenuItemNum pageSize)`                                                | **pageSize** - Количество элементов на каждой страницы меню                                                                                                                                                                           | -                     | Инициализирует меню с указанным количеством элементов на каждой страницы, используется когда устройство вывода ручное или под-меню                                                        |
| `void setScrollMode(unsigned char mode)`                                          | **mode** - Константа из категории прокрутки, представляющая желаемый режим прокрутки                                                                                                                                                  | -                     | Изменяет способ прокрутки элементов в меню                                                                                                                                                |
| `void update()`                                                                   | -                                                                                                                                                                                                                                     | -                     | Обновляет меню на устройстве вывода (вызывается автоматически при нажатии кнопки)                                                                                                         |
| `void tick()`                                                                     | -                                                                                                                                                                                                                                     | -                     | Запускаеет обработку всего (обработка нажатии на кнопки и т.д), должно вызываться в функции `loop`                                                                                        |
| `void bindOutputFunction(void(*function)(SMenuRenderItems))`                      | **function** - Указатель на метод с сигнатурой `void function(SMenuRenderItems items)`                                                                                                                                                | -                     | Привязывает функцию к рендерингу, связанная функция будет вызываться, когда меню потребуется отрисовать. Следует использовать и реализовывать при использовании ручного устройства вывода |                

**Методы, требующие библиотеку `GyverOLED`**
| Сигнатура метода                                                                  | Аргументы                                                                                                                                                                                                                             | Возвращаемое значение | Описание                                                                                                                                                                          |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `void initOLED(unsigned char type, GyverOLED* oled)`                              | **type** - Тип экрана, в основном константа `OLED128x32` или `OLED128x64`<br>**oled** - Указатель на объект экрана                                                                                                                    | -                     | Инициализирует меню при помощи OLED экрана, тип предназначен для определения кол-во элементов на странице, указатель на объект экрана для вывода на неего меню                    |
| `void renderOLED()`                                                               | -                                                                                                                                                                                                                                     | -                     | Выводит меню на экран который Вы указали в методе `initOLED`                                                                                                                      |

**Методы, требующие библиотеку `GyverButton`:**
| Сигнатура метода                                                                  | Аргументы                                                                                                                                                                                                                             | Возвращаемое значение | Описание                                                                                                                                                                          |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `void bindButton(GButton* button, byte action)`                                   | **button** - Указатель на кнопку которую Вы хотите привязать к действию<br>**action** - Идентификатор действия, используйте константу из категории `Действия устройства ввода`                                                        | -                     | Привязывает одну кнопку к определенному действию в меню                                                                                                                           |
| `void bindButton(GButton* down, GButton* up, GButton* select)`                    | **down** - Указатель на кнопку "вниз"<br>**up** - Указатель на кнопку "вверх"<br>**select** - Указатель на кнопку "выбор"                                                                                                             | -                     | Привязывает несколько кнопок к их действиям (это то же самое, что и вызов предыдущего метода для каждой кнопки и указание соответствующих действий для каждой кнопки)             |

**Методы, требующие библиотеку `GyverEncoder`:**
| Сигнатура метода                                                                  | Аргументы                                                                                                                                                                                                                             | Возвращаемое значение | Описание                                                                                                                                                                          |
| --------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `void bindEncoder(Encoder* encoder)`                                              | **encoder** - Указатель на энкодер с которого меню будет управляться                                                                                                                                                                  | -                     | Привязывает энкодер к действиям в меню (прокрутка энкодера вправо для перемещения вниз, влево для перемещения вверх и щелчок на энкодере для выбора)                              |